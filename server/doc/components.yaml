components:
  schemas:
    User:
      type: object
      properties:
        id:
          $ref: "#components/schemas/PrimaryKey"
        email:
          type: string
          format: email
        firstname:
          $ref: "#components/schemas/Firstname"
        lastname:
          $ref: "#components/schemas/Lastname"
        bio:
          type: string
          example: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla fringilla turpis venenatis, ultrices felis quis, consectetur purus cras amet.
          maxLength: 140
        slug:
          $ref: "#components/schemas/Slug"
        avatarUrl:
          $ref: "#components/schemas/URL"
        isAdmin:
          type: boolean
        createdAt:
          $ref: "#components/schemas/DateTZ"
        records:
          type: array
          items:
            $ref: "#components/schemas/Record"
        learnedLanguages:
          type: array
          items:
            $ref: "#components/schemas/Language"
        taughtLanguages:
          type: array
          items:
            $ref: "#components/schemas/Language"

    UpdatedUser:
      type: object
      properties:
        email:
          type: string
          format: email
        firstname:
          $ref: "#components/schemas/Firstname"
        lastname:
          $ref: "#components/schemas/Lastname"
        password:
          $ref: "#components/schemas/Password"
        confirm:
          $ref: "#components/schemas/Password"
        bio:
          type: string
          example: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla fringilla turpis venenatis, ultrices felis quis, consectetur purus cras amet.
          maxLength: 140
        learnedLanguages:
          type: array
          items:
            $ref: "#components/schemas/Language"
        taughtLanguages:
          type: array
          items:
            $ref: "#components/schemas/Language"

    NewUser:
      type: object
      properties:
        email:
          type: string
          format: email
        password:
          $ref: "#components/schemas/Password"
        confirm:
          $ref: "#components/schemas/Password"
        firstname:
          $ref: "#components/schemas/Firstname"
        lastname:
          $ref: "#components/schemas/Lastname"
      required:
        - email
        - password
        - confirm

    LoginForm:
      type: object
      properties:
        email:
          type: string
          format: email
        password:
          $ref: "#components/schemas/Password"
      required:
        - email
        - password

    Record:
      type: object
      properties:
        id:
          $ref: "#components/schemas/PrimaryKey"
        url:
          $ref: "#components/schemas/URL"
        createdAt:
          $ref: "#components/schemas/DateTZ"
        englishTranslation:
          $ref: "#components/schemas/Translation"
        translation:
          $ref: "#components/schemas/Translation"

    Language:
      type: object
      properties:
        id:
          $ref: "#components/schemas/PrimaryKey"
        name:
          type: string
          example: english
        code:
          type: string
          example: en
          pattern: "[a-z]{2,4}"

    Translation:
      type: object
      properties:
        id:
          $ref: "#components/schemas/PrimaryKey"
        text:
          type: string
          example: How are you ?
        createdAt:
          $ref: "#components/schemas/DateTZ"
        expression:
          $ref: "#components/schemas/Expression"
        language:
          $ref: "#components/schemas/Language"

    EXpression:
      type: object
      properties:
        id:
          $ref: "#components/schemas/PrimaryKey"
        label:
          type: string
          example: "greetings"
        createdAt:
          $ref: "#components/schemas/DateTZ"

    URL:
      type: string
      format: uri
      example: /c/0/f/6/sdfesse55ad54uom8da

    DateTZ:
      type: string
      format: date-time

    PrimaryKey:
      type: integer
      minimum: 1
      example: 24

    Firstname:
      type: string
      example: Michael

    Lastname:
      type: string
      example: Rapaport

    Password:
      type: string
      example: mySecuredPa$$word
      format: password

    Slug:
      type: string
      example: michael-rapaport24
      pattern: '[a-z\d]+(-[a-z\d])*'

    JWT:
      type: string
      example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
      format: JWT

    Errors:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#components/schemas/Error"

    Error:
      type: object
      properties:
        msg:
          type: string
          example: An error has occured

  responses:
    BadRequest:
      description: Bad request. Missing parameter(s) or invalid value(s)
      content:
        application/json:
          schema:
            $ref: "#components/schemas/Errors"

    Conflict:
      description: Conflict. Field(s) already set in database
      content:
        application/json:
          schema:
            $ref: "#components/schemas/Errors"

    Unauthorized:
      description: Unauthorized. The authentication process failed.
      content:
        application/json:
          schema:
            $ref: "#components/schemas/Errors"

    UserNotFound:
      description: Not Found. No user corresponding to the specified parameter exists in our database.
      content:
        application/json:
          schema:
            $ref: "#components/schemas/Errors"

    NoContent:
      description: Success. An empty object.
      content:
        application/json:
          schema:
            type: object

  securitySchemes:
    BearerJWT:
      type: http
      scheme: bearer
      bearerFormat: JWT
